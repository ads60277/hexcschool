(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),a("div",{staticClass:"container cartheight"},[a("nav"),a("div",{staticClass:"row justify-content-center align-items-center"},[a("div",{staticClass:"col-sm-12 align-self-center"},[t.carts.length>0?a("div",{attrs:{id:"cartContent"}},[a("div",{staticClass:"border p-3",attrs:{id:"cartTable"}},[a("div",{staticClass:"row d-flex justify-content-end pl-3 pr-3"},[a("div",{staticClass:"col-3 d-flex justify-content-end align-items-center",staticStyle:{height:"40px"}},[a("button",{staticClass:"btn btn-sm",on:{click:function(s){return t.removeAllCartItem()}}},[a("i",{staticClass:"far fa-trash-alt mr-1"}),a("span",[t._v("清空全部")])])])]),t._l(t.carts,(function(s){return a("div",{key:s.product.id+1,staticClass:"row d-flex justify-content-between pl-3 pr-3 mb-3"},[a("div",{staticClass:"cart_img"},[a("img",{attrs:{src:s.product.imageUrl[0]}})]),a("div",{staticClass:"col-3 d-flex justify-content-start align-items-center",staticStyle:{height:"60px"}},[t._v(t._s(s.product.title))]),a("div",{staticClass:"col-xs-4 d-flex justify-content-center align-items-center text-center",staticStyle:{height:"60px"}},[t._m(0,!0),a("div",{staticClass:"numbox input-group input-group-sm m-0"},[a("input",{staticClass:"form-control text-center",attrs:{type:"number"},domProps:{value:s.quantity},on:{input:function(a){return t.updateQuantity(s.product.id,a.target.value)}}})]),t._m(1,!0)]),a("div",{staticClass:"col-2 d-flex justify-content-center align-items-center",staticStyle:{height:"60px"}},[t._v(t._s(s.quantity)+" "+t._s(s.product.unit))]),a("div",{staticClass:"col-2 d-flex justify-content-center align-items-center",staticStyle:{height:"60px"}},[t._v("NT. "+t._s(s.product.price*s.quantity))]),a("div",{staticClass:"col-1 d-flex justify-content-center align-items-center",staticStyle:{height:"60px"}},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.removeCartItem(s.product.id)}}},[a("i",{staticClass:"fas fa-times text-danger bolder"})])])])}))],2),a("div",{staticClass:"d-flex justify-content-end pl-3 pr-3",attrs:{id:"sumTable"}},[a("div",{staticClass:"col-md-8 d-flex justify-content-end align-items-center"},[a("div",{staticClass:"row d-flex justify-content-end"},[a("div",{staticClass:"col-12 d-flex justify-content-end align-items-start pb-2"},[a("table",{staticClass:"table text-right"},[a("tbody",[a("tr",[a("td",{attrs:{scope:"col"}}),a("td",{attrs:{scope:"col"}},[t._v("總計")]),a("td",{attrs:{scope:"col"}},[t.cartTotal>=999?a("span",[t._v("NT. "+t._s(t.cartTotal))]):a("span",[t._v("NT. "+t._s(t.cartTotal+80))])])])])])])])])]),a("div",{staticClass:"fnbar row d-flex justify-content-between align-items-center mt-3"},[a("div",{staticClass:"col-xs-4 d-flex justify-content-start align-items-center pl-3"},[a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/products"}},[t._v("繼續購物")])],1),a("div",{staticClass:"col-xs-4 d-flex justify-content-end align-items-center pr-3"},[a("router-link",{staticClass:"btn btn-primary",class:{disabled:t.cartTotal<=0},attrs:{to:"/finish"}},[t._v("訂單結帳")])],1)])]):a("div",{staticClass:"row d-flex justify-content-center align-items-start mt-3 my-3",attrs:{id:"noCartContent"}},[a("div",{staticClass:"col-12 text-center justify-content-center align-items-center  p-3 mt-3"},[a("p",{staticClass:"mb-3"},[t._v("您的購物車目前是空的喔")]),a("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/products"}},[t._v(" 繼續購物")])],1)])])])])],1)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn-quantity-control  btn text-center",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-minus"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("button",{staticClass:"btn-quantity-control  btn",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-plus"})])}],n=(a("99af"),a("4160"),a("159b"),{name:"Cart",data:function(){return{isLoading:!1,fullPage:!0,products:{},coupon:{},coupon_code:"",carts:{},cartTotal:0,quantityTatol:0,orignalTotal:0,uuid:"56ff457f-9ba1-4d05-9358-26f3844d450a"}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io","/api/").concat(this.uuid,"/ec/shopping");this.$http.get(s).then((function(s){t.carts=s.data.data,t.calTotal(),t.isLoading=!1})).catch((function(s){t.isLoading=!1,t.$bus.$emit("message:push","資料讀取失敗，請稍後再試\n            ".concat(s),"danger")}))},calTotal:function(){var t=0,s=0;this.carts.forEach((function(a){t+=a.product.price*a.quantity,s+=a.quantity})),this.cartTotal=t,this.quantityTatol=s},updateQuantity:function(t){var s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io","/api/").concat(this.uuid,"/ec/shopping"),e={product:t,quantity:a};this.$http.patch(i,e).then((function(){s.getCart(),s.isLoading=!1}))},removeCartItem:function(t){var s=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat(this.uuid,"/ec/shopping/").concat(t);this.$http.delete(a).then((function(){s.$bus.$emit("update-total"),s.getCart(),s.isLoading=!1,s.$bus.$emit("message:push","商品已刪除","success")})).catch((function(t){s.isLoading=!1,s.$bus.$emit("message:push","商品刪除失敗\n          ".concat(t),"danger")}))},removeAllCartItem:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io","/api/").concat(this.uuid,"/ec/shopping/all/product");this.$http.delete(s).then((function(){t.$bus.$emit("update-total"),t.getCart(),t.cartTotal=0,t.isLoading=!1,t.$bus.$emit("message:push","商品已全部刪除，將返回產品頁面","success"),t.$router.push("/products")})).catch((function(s){t.isLoading=!1,t.$bus.$emit("message:push","商品刪除失敗\n          ".concat(s),"danger")}))}}}),c=n,o=a("2877"),r=Object(o["a"])(c,i,e,!1,null,null,null);s["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d2102cc.39969acb.js.map